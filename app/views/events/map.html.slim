= content_for :title, "BaromÃ¨tre - vue carte"

= turbo_frame_tag :content, class: "grow overflow-hidden relative"

  /this input is only here to pass venues data to map controller
  input type="hidden" data-map-target="venuesData" value=@venues.to_json

  section#events_days_container.flex.flex-col.absolute.left-0.bottom-0.right-0[
  class="md:top-0 md:max-h-none! max-h-[33vh] max-md:h-fit"
    data-map-target="eventsMainCtn"
  ]
    /grab icon
    button.md:hidden.relative.w-fit.m-auto.top-2.pt-1.pb-2.px-2.bg-white.rounded-t.pointer-events-auto[
      class="group hover:cursor-grab active:cursor-grabbing"
      data-action="mousedown->map#dragEventListHeight"
    ]
      svg.fill-blue-faded.size-5.group-hover:fill-yellow viewBox="0 0 640 640": path d="M152 160C174.1 160 192 177.9 192 200L192 248C192 270.1 174.1 288 152 288L104 288C81.9 288 64 270.1 64 248L64 200C64 177.9 81.9 160 104 160L152 160zM344 288L296 288C273.9 288 256 270.1 256 248L256 200C256 177.9 273.9 160 296 160L344 160C366.1 160 384 177.9 384 200L384 248C384 270.1 366.1 288 344 288zM536 288L488 288C465.9 288 448 270.1 448 248L448 200C448 177.9 465.9 160 488 160L536 160C558.1 160 576 177.9 576 200L576 248C576 270.1 558.1 288 536 288zM536 480L488 480C465.9 480 448 462.1 448 440L448 392C448 369.9 465.9 352 488 352L536 352C558.1 352 576 369.9 576 392L576 440C576 462.1 558.1 480 536 480zM344 352C366.1 352 384 369.9 384 392L384 440C384 462.1 366.1 480 344 480L296 480C273.9 480 256 462.1 256 440L256 392C256 369.9 273.9 352 296 352L344 352zM152 480L104 480C81.9 480 64 462.1 64 440L64 392C64 369.9 81.9 352 104 352L152 352C174.1 352 192 369.9 192 392L192 440C192 462.1 174.1 480 152 480z"

    div.overflow-y-scroll.px-1.mb-1[
      class="[direction:rtl] [scrollbar-width:thin]"
      data-map-target="eventList"
    ]
      ul.flex.flex-col.gap-1.pointer-events-auto class="[direction:ltr]"

        - if @events.count.zero?
          li: p.px-1.py-8.mb-1.ml-1.text-center.text-xl.bg-white Aucun rÃ©sultat

        - @events.each do |event|
          a.border-l-8.border-white[
            data-action="click->map#onEventClick mouseenter->map#onEventMouseOver mouseleave->map#onEventMouseLeave"
            data-map-target="eventElt"
            data-venue-id=event.venue.id
          ]
            = render event
